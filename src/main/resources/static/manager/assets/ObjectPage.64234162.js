var e=Object.defineProperty,a=Object.prototype.hasOwnProperty,l=Object.getOwnPropertySymbols,t=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,i)=>{for(var n in i||(i={}))a.call(i,n)&&o(e,n,i[n]);if(l)for(var n of l(i))t.call(i,n)&&o(e,n,i[n]);return e};import{B as n,A as d,_ as r,s,c as p,e as u,C as m,f as c,g as b,u as g,D as f,i as _,d as y,r as D,k as v,o as h,l as k,q as N,E as w,n as j,F as V,t as C,y as O,x as S,p as x,j as I,m as z,G as T,H as P,w as U,h as G,I as E}from"./index.2317b1b9.js";function Y(){const e=d();return{dialogRef:e,openDialog:(a,l,t)=>{if("string"==typeof l){const o=n((()=>r((()=>__import__(`${l}`)),void 0)));e.value.openDialog(a,o,t)}else e.value.openDialog(a,l,t)},openObjectDialog:(a,l,t)=>{e.value.openObjectDialog(a,{tableName:l,id:t})}}}n((()=>r((()=>__import__("./SearchPage.544e1b9e.js")),["./assets/SearchPage.544e1b9e.js","./assets/Welcome.1ba922d1.css","./assets/index.2317b1b9.js","./assets/index.08256ae5.css","./assets/vendor.25d1acb5.js"])));var q=y({props:{tableInfo:{type:Object,default:{}},objectData:{type:Object,default:{}}},emits:["openDialog"],setup:(e,a)=>i({openDialog:(e,l,t)=>{a.emit("openDialog",e,l,t)}},function(e,a){g();let l=s({loading:!1,result:[],page:1,pageSize:30,orders:[],total:0,totalPage:0}),t=s({objectData:null,tableInfo:null});t.tableInfo=e.tableInfo,t.objectData=e.objectData;let o=e=>{if(null==t.objectData)return;let a={};a[t.tableInfo.upTableColumnName]=t.objectData.id,l.loading=!0,p.post("/sys/manager/api/"+t.tableInfo.name+"/list",{where:a,page:e,pageSize:l.pageSize,orders:l.orders}).then((e=>{l.result=e.data.datas,l.total=e.data.total,l.page=e.data.page,l.pageSize=e.data.pageSize,l.totalPage=e.data.totalPage,l.loading=!1})).catch((e=>{u(e),l.loading=!1}))};b(e,(()=>{o(1)}));let i=c((()=>t.tableInfo?t.tableInfo.columns.filter((e=>e.name!=t.tableInfo.upTableColumnName)):[]));return o(1),{handleSortChange:(e,a,t)=>{l.orders=e.prop?[{field:e.prop,order:"ascending"==e.order?"asc":"desc"}]:[],o(l.page)},dataGrid:l,data:t,queryData:o,listColumns:i}}(e)),name:"ItemGrid"});q.render=function(e,a,l,t,o,i){const n=D("el-pagination"),d=D("el-table-column"),r=D("el-option"),s=D("el-select"),p=D("el-icon"),u=D("el-table"),m=D("el-container"),c=v("loading");return h(),k(V,null,[N(n,{onSizeChange:a[1]||(a[1]=a=>{e.dataGrid.pageSize=a,e.queryData(e.dataGrid.page)}),onCurrentChange:a[2]||(a[2]=a=>e.queryData(a)),currentPage:e.dataGrid.page,"onUpdate:currentPage":a[3]||(a[3]=a=>e.dataGrid.page=a),onPrevClick:a[4]||(a[4]=a=>e.queryData(e.dataGrid.page-1)),onNextClick:a[5]||(a[5]=a=>e.queryData(e.dataGrid.page+1)),"page-sizes":[10,30,50,100],"page-size":e.dataGrid.pageSize,layout:"sizes, prev, pager, next,total",total:e.dataGrid.total},null,8,["currentPage","page-size","total"]),N(m,null,{default:w((()=>[j(N(u,{size:"mini",onSortChange:e.handleSortChange,data:e.dataGrid.result,height:480,border:""},{default:w((()=>[(h(!0),k(V,null,C(e.listColumns,(a=>(h(),k(V,null,["id"===a.apiName?(h(),k(d,{key:0,sortable:"N"!==a.isSort,"show-overflow-tooltip":!0,width:"60",prop:a.apiName,label:a.remark},null,8,["sortable","prop","label"])):"select"===a.view_type?(h(),k(d,{key:1,sortable:"N"!==a.isSort,prop:a.apiName,label:a.remark,width:"120"},{default:w((e=>[N(s,{size:"mini",disabled:"",modelValue:e.row[a.apiName],"onUpdate:modelValue":l=>e.row[a.apiName]=l,placeholder:"请选择"},{default:w((()=>[(h(!0),k(V,null,C(a.selectOps,(e=>(h(),k(r,{label:e.remark,value:e.name},null,8,["label","value"])))),256))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["sortable","prop","label"])):"object"===a.view_type?(h(),k(d,{key:2,sortable:"N"!==a.isSort,prop:a.apiName,label:a.remark},{default:w((l=>[N(p,{class:"el-icon-link",onClick:t=>e.openDialog(a.linkTableName,a.linkTable,l.row[a.apiName])},null,8,["onClick"]),N("span",null,O(l.row[a.apiName+"_desc"]),1)])),_:2},1032,["sortable","prop","label"])):(h(),k(d,{key:3,sortable:"N"!==a.isSort,"show-overflow-tooltip":!0,prop:a.apiName,label:a.remark},{default:w((e=>[S(O(e.row[a.apiName]),1)])),_:2},1032,["sortable","prop","label"]))],64)))),256))])),_:1},8,["onSortChange","data"]),[[c,e.dataGrid.loading]])])),_:1})],64)};var M=y({props:{title:{type:String,default:"对话框"},is:{type:Object,default:y({name:"temp-dialog-default",render:()=>"<div>欢迎使用👏</div>"})},param:{type:Object,default:{}},events:{type:Object,default:{}}},setup(e,a){let l=d(!1),t=d(!1),o=d("对话框"),i=s({comp:e.is,param:e.param,events:{}});return{fullScreen:l,dialogVisible:t,openObjectDialog:(e,a)=>{i.param=a,i.comp=n((()=>r((()=>Promise.resolve().then((function(){return K}))),void 0))),t.value=!0},data:i,Title:o,openDialog:(e,a,l)=>{o.value=e,i.param=l,i.comp=a,t.value=!0}}},name:"CustomDialog"});const R=U();x("data-v-9017220c");const A={style:{size:"12px","padding-left":"6px"}};I();const L=R(((e,a,l,t,o,i)=>{const n=D("el-icon"),d=D("el-col"),r=D("el-dialog");return h(),k(r,{"custom-class":e.fullScreen?"":"custom-el-dialog",width:"90%",fullscreen:e.fullScreen,"lock-scroll":"","append-to-body":"",modelValue:e.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogVisible=a),"destroy-on-close":""},{title:R((()=>[N(n,{class:"el-icon-reading"}),N("span",A,O(e.Title),1),N(d,{style:{width:"100%"}}),N("i",{onClick:a[1]||(a[1]=a=>e.fullScreen=!e.fullScreen),class:"el-dialog__headerbtn2 el-icon-full-screen"})])),default:R((()=>[(h(),k(z(e.data.comp),T(e.data.param,P(e.data.events)),null,16))])),_:1},8,["custom-class","fullscreen","modelValue"])}));M.render=L,M.__scopeId="data-v-9017220c";var H=y({components:{ItemGrid:q,CustomDialog:M},props:{id:{type:Number,default:-1},tableName:{type:String,default:""},editable:{type:Boolean,default:!1}},setup(e,a){let l=G();g();return i({openNewPage:e=>{window.open(l.resolve(e).href,"_blank")}},function(e,a){const l=g();let t=s({loading:!0,tableInfo:{},objectData:null}),o=s({value:null}),n=s({}),d=()=>{let a=e.tableName,o=l&&l.params.tableName;!a&&o&&(a=o),t.loading=!0,p.get("/sys/manager/api/table?name="+a).then((e=>{t.tableInfo=e.data,r()})).catch((e=>{u(e),t.loading=!1}))},r=()=>{let a=e.id,i=l&&l.params.id;-1==a&&i&&(a=i),p.get("/sys/manager/api/"+t.tableInfo.name+"/get?id="+a).then((e=>{t.objectData=e.data,o.value=t.tableInfo.itemTables,t.loading=!1,m(t.tableInfo.name)})).catch((e=>{u(e),t.loading=!1}))};d();let y=c((()=>{var e,a;return null!=(a=null==(e=t.tableInfo.columns)?void 0:e.filter((e=>"id"!==e.name)))?a:[]}));b(t,(e=>{var a,l;null!=t.objectData&&(null!=(l=null==(a=t.tableInfo.columns)?void 0:a.filter((e=>"id"!==e.name)))?l:[]).forEach((e=>{"select"===e.view_type?n[e.apiName]=""+t.objectData[e.apiName]:"datenumber"===e.view_type?n[e.apiName]=f(""+t.objectData[e.apiName]):"object"===e.view_type?(n[e.apiName+"_desc"]=t.objectData[e.apiName+"_desc"],n[e.apiName]=t.objectData[e.apiName]):n[e.apiName]=t.objectData[e.apiName]}))}));let D=c((()=>_())),v=c((()=>o.value&&o.value.length>0?o.value:[]));return i(i({load:d,objectData:t,pageData:n,showColumns:y,selectLabel:(e,a)=>{let l=a.selectOps.filter((a=>a.name==e));return l.length>0?l[0].remark:""},shortcuts:D},Y()),{itemTables:v})}(e))},name:"ObjectPage"});const B=U();x("data-v-5a0a3042");const F=S("刷新"),$={style:{"margin-top":"36px"}};I();const J=B(((e,a,l,t,o,i)=>{const n=D("el-button"),d=D("el-container"),r=D("el-input"),s=D("el-form-item"),p=D("el-date-picker"),u=D("el-option"),m=D("el-select"),c=D("el-col"),b=D("el-row"),g=D("el-form"),f=D("el-card"),_=D("el-divider"),y=D("item-grid"),w=D("el-tab-pane"),S=D("el-tabs"),x=D("custom-dialog"),I=v("loading");return h(),k(V,null,[j(N(d,{class:"affix-container",style:{padding:"10px","flex-direction":"column"}},{default:B((()=>[N(d,{class:"fixedContainer",style:{height:"30px","padding-bottom":"6px"}},{default:B((()=>[N(n,{type:"primary",onClick:a[1]||(a[1]=a=>e.load())},{default:B((()=>[F])),_:1})])),_:1}),N("div",$,[N(f,null,{default:B((()=>[N(g,{"label-width":"100px",size:"mini"},{default:B((()=>[N(b,{gutter:20,style:{width:"100%"}},{default:B((()=>[(h(!0),k(V,null,C(e.showColumns,(a=>(h(),k(c,{xs:24*a.view_size,sm:12*a.view_size,md:8*a.view_size,lg:6*a.view_size},{default:B((()=>["textarea"===a.view_type?(h(),k(s,{key:0,label:a.remark},{default:B((()=>[N(r,{type:"textarea",autosize:"",disabled:!e.editable,modelValue:e.pageData[a.apiName],"onUpdate:modelValue":l=>e.pageData[a.apiName]=l},null,8,["disabled","modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):"date"===a.view_type?(h(),k(s,{key:1,label:a.remark},{default:B((()=>[N(p,{disabled:!e.editable,style:{width:"auto!important"},modelValue:e.pageData[a.apiName],"onUpdate:modelValue":l=>e.pageData[a.apiName]=l,type:"date",placeholder:"选择日期",format:"YYYYMMDD HH:mm:ss",shortcuts:e.shortcuts},null,8,["disabled","modelValue","onUpdate:modelValue","shortcuts"])])),_:2},1032,["label"])):"datenumber"===a.view_type?(h(),k(s,{key:2,label:a.remark},{default:B((()=>[N(p,{disabled:!e.editable,style:{width:"auto!important"},modelValue:e.pageData[a.apiName],"onUpdate:modelValue":l=>e.pageData[a.apiName]=l,type:"date",placeholder:"选择日期",format:"YYYYMMDD",shortcuts:e.shortcuts},null,8,["disabled","modelValue","onUpdate:modelValue","shortcuts"])])),_:2},1032,["label"])):"select"===a.view_type?(h(),k(s,{key:3,label:a.remark},{default:B((()=>[N(m,{disabled:!e.editable,modelValue:e.pageData[a.apiName],"onUpdate:modelValue":l=>e.pageData[a.apiName]=l,placeholder:"请选择"},{default:B((()=>[(h(!0),k(V,null,C(a.selectOps,(e=>(h(),k(u,{label:e.remark,value:e.name},null,8,["label","value"])))),256))])),_:2},1032,["disabled","modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):"object"===a.view_type?(h(),k(s,{key:4,"data-info":e.pageData.c_orig_id_desc,label:a.remark},{default:B((()=>[e.editable?(h(),k(r,{key:0,modelValue:e.pageData[a.apiName+"_desc"],"onUpdate:modelValue":l=>e.pageData[a.apiName+"_desc"]=l},{suffix:B((()=>[N("i",{class:"el-input__icon el-icon-link",onClick:l=>e.openObjectDialog(a.linkTableName,a.linkTable,e.pageData[a.apiName])},null,8,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue"])):(h(),k("i",{key:1,class:"text_nowrap",style:{width:"100%",transform:"translateY(-2.1px)",height:"28px",background:"white",border:"none","text-align":"left","font-size":"12px",color:"#C0C4CC"},size:"mini",onClick:l=>e.openObjectDialog(a.linkTableName,a.linkTable,e.pageData[a.apiName])},O(e.pageData[a.apiName+"_desc"]),9,["onClick"]))])),_:2},1032,["data-info","label"])):(h(),k(s,{key:5,label:a.remark},{default:B((()=>[N(r,{disabled:!e.editable,modelValue:e.pageData[a.apiName],"onUpdate:modelValue":l=>e.pageData[a.apiName]=l},null,8,["disabled","modelValue","onUpdate:modelValue"])])),_:2},1032,["label"]))])),_:2},1032,["xs","sm","md","lg"])))),256))])),_:1})])),_:1})])),_:1}),e.itemTables.length>0?(h(),k(_,{key:0})):E("",!0),e.itemTables.length>0?(h(),k(S,{key:1,type:"border-card"},{default:B((()=>[(h(!0),k(V,null,C(e.itemTables,(a=>(h(),k(w,{label:a.remark},{default:B((()=>[N(y,{onOpenDialog:e.openObjectDialog,"table-info":a,"object-data":e.objectData.objectData},null,8,["onOpenDialog","table-info","object-data"])])),_:2},1032,["label"])))),256))])),_:1})):E("",!0)])])),_:1},512),[[I,e.objectData.loading]]),N(x,{ref:"dialogRef"},null,512)],64)}));H.render=J,H.__scopeId="data-v-5a0a3042";var K=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:H});export{K as O,M as _,H as a,Y as g};
