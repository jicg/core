import{d as N,s as j,C as z,r as _,o as d,k as E,m as a,n as e,F as v,a as f,p as V,c as p,q as s,B,P as $,y as A}from"./vendor.257a1e03.js";import{s as C,c as P}from"./comm.155bb935.js";import{_ as S}from"./plugin-vue_export-helper.5a098b48.js";const U=N({name:"JobPage",props:{param:{type:String,default:""}},setup:(o,m)=>{let b=j({row:{},cron:""}),h=z(!1),k=n=>{b.row=n,b.cron=n.cron,h.value=!0},D=()=>{h.value=!1,y(b.row,b.cron)},t=j({jobs:[],jobs2:[],loading:!0}),c=n=>{f.get("/sys/api/job/resume",{params:{jobName:n.jobName,jobGroup:n.groupName}}).then(r=>{g()}).catch(r=>{C(r),t.loading=!1})},u=n=>{f.get("/sys/api/job/pause",{params:{jobName:n.jobName,jobGroup:n.groupName}}).then(r=>{g()}).catch(r=>{C(r),t.loading=!1})},w=n=>{f.get("/sys/api/job/trigger",{params:{jobName:n.jobName,jobGroup:n.groupName}}).then(r=>{P("\u5DF2\u7ECF\u89E6\u53D1\u4EFB\u52A1\uFF01")}).catch(r=>{C(r)})};function y(n,r){f.get("/sys/api/job/cron",{params:{jobName:n.jobName,jobGroup:n.groupName,cron:r}}).then(l=>{g()}).catch(l=>{C(l),t.loading=!1})}let g=()=>{t.loading=!0,f.get("/sys/api/job/list2?mod="+o.param).then(n=>{t.jobs2=n.data,t.loading=!1}).catch(n=>{C(n),t.loading=!1})};return g(),{dialogVisible:h,showCronDialog:k,dialogData:b,setCron:D,tableData:t,resume:c,pause:u,cron:y,trigger:w}}}),G=s("\u6682\u505C"),J=s("\u8FD0\u884C"),q=s("\u8BBE\u7F6E\u65F6\u95F4"),I=s("\u5F00\u59CB "),L=s("\u6682\u505C"),R=s("\u6267\u884C"),T=s("\u6682\u505C"),H=s("\u8FD0\u884C"),K=s("\u8BBE\u7F6E\u65F6\u95F4"),M=s("\u5F00\u59CB "),O=s("\u6682\u505C"),Q=s("\u6267\u884C"),W={class:"dialog-footer"},X=s("\u53D6 \u6D88"),Y=s("\u786E \u5B9A");function Z(o,m,b,h,k,D){const t=_("el-table-column"),c=_("el-tag"),u=_("el-button"),w=_("el-table"),y=_("el-tab-pane"),g=_("el-tabs"),n=_("el-input"),r=_("el-dialog");return d(),E(v,null,[a(g,{size:"mini","tab-position":"right"},{default:e(()=>[o.tableData.jobs2&&o.tableData.jobs2.length>1?(d(!0),E(v,{key:0},V(o.tableData.jobs2,l=>(d(),p(y,{label:l.key},{default:e(()=>[a(w,{size:"mini",data:l.jobs,border:"",style:{width:"100%"}},{default:e(()=>[a(t,{prop:"order",label:"\u5E8F\u53F7",width:"60"}),a(t,{prop:"name",label:"\u540D\u79F0",width:"200"}),a(t,{prop:"cron",label:"\u65F6\u95F4",width:"120"}),a(t,{label:"\u4EFB\u52A1\u6807\u8BC6"},{default:e(i=>[s(B(i.row.jobName+"@"+i.row.groupName),1)]),_:1}),a(t,{prop:"status",label:"\u72B6\u6001",width:"80"},{default:e(i=>[i.row.status==="PAUSED"?(d(),p(c,{key:0,size:"mini",type:"success"},{default:e(()=>[G]),_:1})):(d(),p(c,{key:1,size:"mini",type:"warning"},{default:e(()=>[J]),_:1}))]),_:1}),a(t,{prop:"remark",label:"\u5907\u6CE8",width:"180"}),a(t,{width:"280",label:"\u64CD\u4F5C"},{default:e(i=>[a(u,{size:"mini",onClick:F=>o.showCronDialog(i.row)},{default:e(()=>[q]),_:2},1032,["onClick"]),i.row.status==="PAUSED"?(d(),p(u,{key:0,size:"mini",onClick:F=>o.resume(i.row),type:"warning"},{default:e(()=>[I]),_:2},1032,["onClick"])):(d(),p(u,{key:1,size:"mini",onClick:F=>o.pause(i.row),type:"primary"},{default:e(()=>[L]),_:2},1032,["onClick"])),a(u,{size:"mini",onClick:F=>o.trigger(i.row),type:"primary"},{default:e(()=>[R]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"])]),_:2},1032,["label"]))),256)):o.tableData.jobs2&&o.tableData.jobs2.length===1?(d(),p(w,{key:1,size:"mini",data:o.tableData.jobs2[0].jobs,border:"",style:{width:"100%"}},{default:e(()=>[a(t,{prop:"order",label:"\u5E8F\u53F7",width:"60"}),a(t,{prop:"name",label:"\u540D\u79F0",width:"200"}),a(t,{prop:"cron",label:"\u65F6\u95F4",width:"120"}),a(t,{label:"\u4EFB\u52A1\u6807\u8BC6"},{default:e(l=>[s(B(l.row.jobName+"@"+l.row.groupName),1)]),_:1}),a(t,{prop:"status",label:"\u72B6\u6001",width:"80"},{default:e(l=>[l.row.status==="PAUSED"?(d(),p(c,{key:0,size:"mini",type:"success"},{default:e(()=>[T]),_:1})):(d(),p(c,{key:1,size:"mini",type:"warning"},{default:e(()=>[H]),_:1}))]),_:1}),a(t,{prop:"remark",label:"\u5907\u6CE8",width:"180"}),a(t,{width:"280",label:"\u64CD\u4F5C"},{default:e(l=>[a(u,{size:"mini",onClick:i=>o.showCronDialog(l.row)},{default:e(()=>[K]),_:2},1032,["onClick"]),l.row.status==="PAUSED"?(d(),p(u,{key:0,size:"mini",onClick:i=>o.resume(l.row),type:"warning"},{default:e(()=>[M]),_:2},1032,["onClick"])):(d(),p(u,{key:1,size:"mini",onClick:i=>o.pause(l.row),type:"primary"},{default:e(()=>[O]),_:2},1032,["onClick"])),a(u,{size:"mini",onClick:i=>o.trigger(l.row),type:"primary"},{default:e(()=>[Q]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])):$("",!0)]),_:1}),a(r,{title:"\u8BBE\u7F6E\u65F6\u95F4-"+o.dialogData.row.name,modelValue:o.dialogVisible,"onUpdate:modelValue":m[3]||(m[3]=l=>o.dialogVisible=l)},{footer:e(()=>[A("span",W,[a(u,{onClick:m[1]||(m[1]=l=>o.dialogVisible=!1)},{default:e(()=>[X]),_:1}),a(u,{type:"primary",onClick:m[2]||(m[2]=l=>o.setCron())},{default:e(()=>[Y]),_:1})])]),default:e(()=>[a(n,{placeholder:"\u65F6\u95F4",modelValue:o.dialogData.cron,"onUpdate:modelValue":m[0]||(m[0]=l=>o.dialogData.cron=l)},null,8,["modelValue"])]),_:1},8,["title","modelValue"])],64)}var oe=S(U,[["render",Z],["__scopeId","data-v-7a8ee6d8"]]);export{oe as default};
