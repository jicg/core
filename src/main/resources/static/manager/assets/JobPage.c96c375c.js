var e=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,l=(a,o,t)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t;"undefined"!=typeof require&&require;import{s as i,b as r,e as s,D as n,r as d,i as p,h as b,g as u,F as m,A as c,B as g,o as f,j as w,c as y,l as j,t as h,K as k,k as _}from"./vendor.70422edf.js";import{s as C,c as D}from"./index.f1b42049.js";let N=i({jobs:[],jobs2:[],loading:!0}),z=e=>{r.get("/sys/api/job/resume",{params:{jobName:e.jobName,jobGroup:e.groupName}}).then((e=>{O()})).catch((e=>{C(e),N.loading=!1}))},v=e=>{r.get("/sys/api/job/pause",{params:{jobName:e.jobName,jobGroup:e.groupName}}).then((e=>{O()})).catch((e=>{C(e),N.loading=!1}))},V=e=>{r.get("/sys/api/job/trigger",{params:{jobName:e.jobName,jobGroup:e.groupName}}).then((e=>{D("已经触发任务！")})).catch((e=>{C(e)}))};function P(e,a){r.get("/sys/api/job/cron",{params:{jobName:e.jobName,jobGroup:e.groupName,cron:a}}).then((e=>{O()})).catch((e=>{C(e),N.loading=!1}))}let O=()=>{N.loading=!0,r.get("/sys/api/job/list2").then((e=>{N.jobs2=e.data,N.loading=!1})).catch((e=>{C(e),N.loading=!1}))};var U=s({name:"JobPage",props:{},setup:()=>{let e=i({row:{},cron:""}),r=n(!1);return((e,i)=>{for(var r in i||(i={}))o.call(i,r)&&l(e,r,i[r]);if(a)for(var r of a(i))t.call(i,r)&&l(e,r,i[r]);return e})({dialogVisible:r,showCronDialog:a=>{e.row=a,e.cron=a.cron,r.value=!0},dialogData:e,setCron:()=>{r.value=!1,P(e.row,e.cron)}},(O(),{tableData:N,resume:z,pause:v,cron:P,trigger:V}))}});c("data-v-00f26b87");const A=j("暂停"),E=j("运行"),S=j("设置时间"),G=j("开始 "),q=j("暂停"),x=j("执行"),I=j("暂停"),B=j("运行"),F=j("设置时间"),J=j("开始 "),K=j("暂停"),H=j("执行"),L={class:"dialog-footer"},M=j("取 消"),Q=j("确 定");g(),U.render=function(e,a,o,t,l,i){const r=d("el-table-column"),s=d("el-tag"),n=d("el-button"),c=d("el-table"),g=d("el-tab-pane"),C=d("el-tabs"),D=d("el-input"),N=d("el-dialog");return f(),p(m,null,[b(C,{size:"mini","tab-position":"right"},{default:u((()=>[e.tableData.jobs2&&e.tableData.jobs2.length>1?(f(!0),p(m,{key:0},w(e.tableData.jobs2,(a=>(f(),y(g,{label:a.key},{default:u((()=>[b(c,{size:"mini",data:a.jobs,border:"",style:{width:"100%"}},{default:u((()=>[b(r,{prop:"order",label:"序号",width:"60"}),b(r,{prop:"name",label:"名称",width:"200"}),b(r,{prop:"cron",label:"时间",width:"120"}),b(r,{label:"任务标识"},{default:u((e=>[j(h(e.row.jobName+"@"+e.row.groupName),1)])),_:1}),b(r,{prop:"status",label:"状态",width:"80"},{default:u((e=>["PAUSED"===e.row.status?(f(),y(s,{key:0,size:"mini",type:"success"},{default:u((()=>[A])),_:1})):(f(),y(s,{key:1,size:"mini",type:"warning"},{default:u((()=>[E])),_:1}))])),_:1}),b(r,{prop:"remark",label:"备注",width:"180"}),b(r,{width:"280",label:"操作"},{default:u((a=>[b(n,{size:"mini",onClick:o=>e.showCronDialog(a.row)},{default:u((()=>[S])),_:2},1032,["onClick"]),"PAUSED"===a.row.status?(f(),y(n,{key:0,size:"mini",onClick:o=>e.resume(a.row),type:"warning"},{default:u((()=>[G])),_:2},1032,["onClick"])):(f(),y(n,{key:1,size:"mini",onClick:o=>e.pause(a.row),type:"primary"},{default:u((()=>[q])),_:2},1032,["onClick"])),b(n,{size:"mini",onClick:o=>e.trigger(a.row),type:"primary"},{default:u((()=>[x])),_:2},1032,["onClick"])])),_:1})])),_:2},1032,["data"])])),_:2},1032,["label"])))),256)):e.tableData.jobs2&&1===e.tableData.jobs2.length?(f(),y(c,{key:1,size:"mini",data:e.tableData.jobs2[0].jobs,border:"",style:{width:"100%"}},{default:u((()=>[b(r,{prop:"order",label:"序号",width:"60"}),b(r,{prop:"name",label:"名称",width:"200"}),b(r,{prop:"cron",label:"时间",width:"120"}),b(r,{label:"任务标识"},{default:u((e=>[j(h(e.row.jobName+"@"+e.row.groupName),1)])),_:1}),b(r,{prop:"status",label:"状态",width:"80"},{default:u((e=>["PAUSED"===e.row.status?(f(),y(s,{key:0,size:"mini",type:"success"},{default:u((()=>[I])),_:1})):(f(),y(s,{key:1,size:"mini",type:"warning"},{default:u((()=>[B])),_:1}))])),_:1}),b(r,{prop:"remark",label:"备注",width:"180"}),b(r,{width:"280",label:"操作"},{default:u((a=>[b(n,{size:"mini",onClick:o=>e.showCronDialog(a.row)},{default:u((()=>[F])),_:2},1032,["onClick"]),"PAUSED"===a.row.status?(f(),y(n,{key:0,size:"mini",onClick:o=>e.resume(a.row),type:"warning"},{default:u((()=>[J])),_:2},1032,["onClick"])):(f(),y(n,{key:1,size:"mini",onClick:o=>e.pause(a.row),type:"primary"},{default:u((()=>[K])),_:2},1032,["onClick"])),b(n,{size:"mini",onClick:o=>e.trigger(a.row),type:"primary"},{default:u((()=>[H])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):k("",!0)])),_:1}),b(N,{title:"设置时间-"+e.dialogData.row.name,modelValue:e.dialogVisible,"onUpdate:modelValue":a[3]||(a[3]=a=>e.dialogVisible=a)},{footer:u((()=>[_("span",L,[b(n,{onClick:a[1]||(a[1]=a=>e.dialogVisible=!1)},{default:u((()=>[M])),_:1}),b(n,{type:"primary",onClick:a[2]||(a[2]=a=>e.setCron())},{default:u((()=>[Q])),_:1})])])),default:u((()=>[b(D,{placeholder:"时间",modelValue:e.dialogData.cron,"onUpdate:modelValue":a[0]||(a[0]=a=>e.dialogData.cron=a)},null,8,["modelValue"])])),_:1},8,["title","modelValue"])],64)},U.__scopeId="data-v-00f26b87";export default U;
