var e=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,l=(a,o,t)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t;import{s as i,e as r,f as s,A as n,p as d,g as p,r as b,o as u,c as m,i as c,F as g,j as w,k as f,t as y,H as j,l as h}from"./vendor.045e14f3.js";import{s as k,c as _}from"./index.d72d71c6.js";let C=i({jobs:[],jobs2:[],loading:!0}),D=e=>{r.get("/sys/api/job/resume",{params:{jobName:e.jobName,jobGroup:e.groupName}}).then((e=>{V()})).catch((e=>{k(e),C.loading=!1}))},N=e=>{r.get("/sys/api/job/pause",{params:{jobName:e.jobName,jobGroup:e.groupName}}).then((e=>{V()})).catch((e=>{k(e),C.loading=!1}))},z=e=>{r.get("/sys/api/job/trigger",{params:{jobName:e.jobName,jobGroup:e.groupName}}).then((e=>{_("已经触发任务！")})).catch((e=>{k(e)}))};function v(e,a){r.get("/sys/api/job/cron",{params:{jobName:e.jobName,jobGroup:e.groupName,cron:a}}).then((e=>{V()})).catch((e=>{k(e),C.loading=!1}))}let V=()=>{C.loading=!0,r.get("/sys/api/job/list2").then((e=>{C.jobs2=e.data,C.loading=!1})).catch((e=>{k(e),C.loading=!1}))};var P=s({name:"JobPage",props:{},setup:()=>{let e=i({row:{},cron:""}),r=n(!1);return((e,i)=>{for(var r in i||(i={}))o.call(i,r)&&l(e,r,i[r]);if(a)for(var r of a(i))t.call(i,r)&&l(e,r,i[r]);return e})({dialogVisible:r,showCronDialog:a=>{e.row=a,e.cron=a.cron,r.value=!0},dialogData:e,setCron:()=>{r.value=!1,v(e.row,e.cron)}},(V(),{tableData:C,resume:D,pause:N,cron:v,trigger:z}))}});const O=h();d("data-v-00f26b87");const U=f("暂停"),A=f("运行"),E=f("设置时间"),S=f("开始 "),G=f("暂停"),x=f("执行"),I=f("暂停"),F=f("运行"),H=f("设置时间"),J=f("开始 "),q=f("暂停"),B=f("执行"),K={class:"dialog-footer"},L=f("取 消"),M=f("确 定");p();const Q=O(((e,a,o,t,l,i)=>{const r=b("el-table-column"),s=b("el-tag"),n=b("el-button"),d=b("el-table"),p=b("el-tab-pane"),h=b("el-tabs"),k=b("el-input"),_=b("el-dialog");return u(),m(g,null,[c(h,{size:"mini","tab-position":"right"},{default:O((()=>[e.tableData.jobs2&&e.tableData.jobs2.length>1?(u(!0),m(g,{key:0},w(e.tableData.jobs2,(a=>(u(),m(p,{label:a.key},{default:O((()=>[c(d,{size:"mini",data:a.jobs,border:"",style:{width:"100%"}},{default:O((()=>[c(r,{prop:"order",label:"序号",width:"60"}),c(r,{prop:"name",label:"名称",width:"200"}),c(r,{prop:"cron",label:"时间",width:"120"}),c(r,{label:"任务标识"},{default:O((e=>[f(y(e.row.jobName+"@"+e.row.groupName),1)])),_:1}),c(r,{prop:"status",label:"状态",width:"80"},{default:O((e=>["PAUSED"===e.row.status?(u(),m(s,{key:0,size:"mini",type:"success"},{default:O((()=>[U])),_:1})):(u(),m(s,{key:1,size:"mini",type:"warning"},{default:O((()=>[A])),_:1}))])),_:1}),c(r,{prop:"remark",label:"备注",width:"180"}),c(r,{width:"280",label:"操作"},{default:O((a=>[c(n,{size:"mini",onClick:o=>e.showCronDialog(a.row)},{default:O((()=>[E])),_:2},1032,["onClick"]),"PAUSED"===a.row.status?(u(),m(n,{key:0,size:"mini",onClick:o=>e.resume(a.row),type:"warning"},{default:O((()=>[S])),_:2},1032,["onClick"])):(u(),m(n,{key:1,size:"mini",onClick:o=>e.pause(a.row),type:"primary"},{default:O((()=>[G])),_:2},1032,["onClick"])),c(n,{size:"mini",onClick:o=>e.trigger(a.row),type:"primary"},{default:O((()=>[x])),_:2},1032,["onClick"])])),_:1})])),_:2},1032,["data"])])),_:2},1032,["label"])))),256)):e.tableData.jobs2&&1===e.tableData.jobs2.length?(u(),m(d,{key:1,size:"mini",data:e.tableData.jobs2[0].jobs,border:"",style:{width:"100%"}},{default:O((()=>[c(r,{prop:"order",label:"序号",width:"60"}),c(r,{prop:"name",label:"名称",width:"200"}),c(r,{prop:"cron",label:"时间",width:"120"}),c(r,{label:"任务标识"},{default:O((e=>[f(y(e.row.jobName+"@"+e.row.groupName),1)])),_:1}),c(r,{prop:"status",label:"状态",width:"80"},{default:O((e=>["PAUSED"===e.row.status?(u(),m(s,{key:0,size:"mini",type:"success"},{default:O((()=>[I])),_:1})):(u(),m(s,{key:1,size:"mini",type:"warning"},{default:O((()=>[F])),_:1}))])),_:1}),c(r,{prop:"remark",label:"备注",width:"180"}),c(r,{width:"280",label:"操作"},{default:O((a=>[c(n,{size:"mini",onClick:o=>e.showCronDialog(a.row)},{default:O((()=>[H])),_:2},1032,["onClick"]),"PAUSED"===a.row.status?(u(),m(n,{key:0,size:"mini",onClick:o=>e.resume(a.row),type:"warning"},{default:O((()=>[J])),_:2},1032,["onClick"])):(u(),m(n,{key:1,size:"mini",onClick:o=>e.pause(a.row),type:"primary"},{default:O((()=>[q])),_:2},1032,["onClick"])),c(n,{size:"mini",onClick:o=>e.trigger(a.row),type:"primary"},{default:O((()=>[B])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):j("",!0)])),_:1}),c(_,{title:"设置时间-"+e.dialogData.row.name,modelValue:e.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=a=>e.dialogVisible=a)},{footer:O((()=>[c("span",K,[c(n,{onClick:a[2]||(a[2]=a=>e.dialogVisible=!1)},{default:O((()=>[L])),_:1}),c(n,{type:"primary",onClick:a[3]||(a[3]=a=>e.setCron())},{default:O((()=>[M])),_:1})])])),default:O((()=>[c(k,{placeholder:"时间",modelValue:e.dialogData.cron,"onUpdate:modelValue":a[1]||(a[1]=a=>e.dialogData.cron=a)},null,8,["modelValue"])])),_:1},8,["title","modelValue"])],64)}));P.render=Q,P.__scopeId="data-v-00f26b87";export default P;
